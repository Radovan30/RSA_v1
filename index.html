<!DOCTYPE html>
<html lang="cs">
    <head>
        <title>RSA</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link href="css/style.css" rel="stylesheet">-->
        <script src="rsa.js"></script>
    </head>
    <body>
        <h1>Ukázka funkčnosti RSA</h1>

        <!-- Zadaní 2 prvocisel P a Q -->
        <section>
            <div>
                <h2>Níže zadejte dvě prvočísla (P,Q)</h2>
                <label for="p">Prvočíslo "P": </label>
                <input type="text" name="prvocisloP" id="p" placeholder="Zde zadejte prvočíslo P">
            </div>
            <div>
                <label for="q">Prvočíslo "Q": </label>
                <input type="text" name="prvocisloQ" id="q" placeholder="Zde zadejte prvočíslo Q">
            </div>
            <div><span class="help">Příklady prvočísel: 11, 13, 17, 19, 23, 29, 191, 193, 197, 199, atd. </span><br>
            <div><span class="help">Příklady prvočísel coprime: 29, 31, atd. </span><br>
            </div>
            <div>
                <br>
                <input type="button" value="Vypočítej klíče" onclick="calculate()">
            </div>
        </section>

        <!-- Tabulka vypocitanych hodnot N, L, E, N a jejich popis  -->
        <table class="pure-table pure-table-bordered">
            <thead>
                <tr>
                    <th>Konstanty</th>
                    <th>Vypočtená hodnota</th>
                    <th>Název</th>
                    <th>Vzorec</th>
                    <th>Popis</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>N</td>
                    <td><input type="text" id="n" class="input-in-col" readonly /></td>
                    <td>Modul</td>
                    <td>N: P * Q</td>
                    <td class="help">Součin 2 prvočísel</td>
                </tr>
                <tr>
                    <td>L</td>
                    <td><input type="text" id="l" class="input-in-col" readonly /></td>
                    <td>Délka</td>
                    <td>L: (P - 1) * (Q - 1)</td>
                    <td class="help">Výpočet hodnoty - "Eulerovy funkce <span>&#966;(n)</span>" </td>
                </tr>
                <tr>
                    <td>E</td>
                    <td><input type="text" id="e" class="input-in-col" onchange="encryptorChanged()" /></td>
                    <td>Šifrovací klíč</td>
                    <td></td>
                    <td class="help">Nalezené číslo mezi 1 a L, které je společné s L a N <br>
                        <span id="enKeyListSpan"></span></td>
                </tr>
                <tr>
                    <td>D</td>
                    <td><input type="text" id="d" class="input-in-col" onchange="decryptorChanged()" /></td>
                    <td>Dešifrovací klíč</td>
                    <td>D * E mod L = 1</td>
                    <td class="help">Zbytek součinu D a E při dělení L by měl být 1 (D * E % L = 1) <br>
                        <span id="deKeyListSpan"></span></td>
                </tr>
            </tbody>
        </table>

        <!-- Vypis verejneho a soukromeho klice -->
        <section>
            <div class="key">
                <span class="key-label">Veřejný klíč se skládá z (D a N) : </span><span id="public-key" class="key-value"></span>
            </div>
            <div class="key">
                <span class="key-label">Privatní klíč se skládá z (E a N) : </span><span id="private-key" class="key-value"></span>
            </div>
        </section>


        <article>
            <h1>Níže napište svoji zprávu</h1>
            <input type="text" id="message" placeholder="Zde napište zprávu"/></p>
            <p><input type="button" value="Encrypt" onclick="encrypt()" /></p>
            <hr />
            <p>Zpráva převedena na ASCII kód: <span id="ascii"></span></p>
            <p>Šifrovaná zpráva: zpráva^E % N &nbsp; &nbsp; &nbsp;<span class="help">PowerMod lze použít k velmi rychlému výpočtu. Vzorec je aplikován na ASCII kód ​​každého znaku</span></p>
            <section>
                <div class="key">
                    <span class="key-label">Encrypted Message: </span><span id="encrypted-msg" class="key-value"></span>
                </div>
            </section>
        </article>
        <article>
            <h1>Step # 3: Decrypt a message</h1>
            <p>Enter a encrypted message (cipher): <input type="text" id="encrypted-msg-textbox" /></p>
            <p><input type="button" value="Decrypt" onclick="decrypt()" /></p>
            <hr />
            <p>Message decrypted to ASCII code: <span id="ascii-decrypted"></span></p>
            <p>Decrypted Message: encrypted_message^D % N &nbsp; &nbsp; &nbsp;<span class="help">(<a
                        href="http://umaranis.com/2018/07/12/calculate-modular-exponentiation-powermod-in-javascript-ap-n/">PowerMod</a>
                    can be used to calculate this very fast. Formula is applied on ASCII code of each character.)</span></p>
            <section>
                <div class="key">
                    <span class="key-label">Decrypted Message: </span><span id="decrypted-msg" class="key-value"></span>
                </div>
            </section>
        </article>

    </body>
</html>